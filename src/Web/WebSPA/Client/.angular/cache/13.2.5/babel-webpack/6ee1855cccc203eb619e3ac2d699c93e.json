{"ast":null,"code":"import { skip } from 'rxjs/operators';\nimport { FilterComponent } from '../filter/filter.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/items.service\";\nimport * as i2 from \"../../services/store.service\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/router\";\n\nfunction ItemsComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 9)(2, \"div\", 10)(3, \"h5\", 11)(4, \"a\", 12);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 13);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/items/\", item_r1.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", item_r1.price, \"\");\n  }\n}\n\nexport let ItemsComponent = /*#__PURE__*/(() => {\n  class ItemsComponent {\n    constructor(itemService, storeService, modalService) {\n      this.itemService = itemService;\n      this.storeService = storeService;\n      this.modalService = modalService;\n    }\n\n    ngOnInit() {\n      this.storeService.pageSizeChanges$.subscribe(newPageSize => {\n        this.storeService.page = 1;\n        this.getItems();\n      });\n      this.storeService.filter$.pipe(skip(1)) //skip getting filter at component creation\n      .subscribe(filter => {\n        this.storeService.page = 1;\n        this.getItems();\n      });\n      this.getItems();\n    }\n\n    getItems() {\n      this.itemService.getItems(this.storeService.page, this.storeService.pageSize, this.storeService.filter).subscribe(itemPayload => {\n        this.storeService.items = itemPayload.items;\n        this.storeService.count = itemPayload.count;\n      });\n    }\n\n    onPageChange(newPage) {\n      this.storeService.page = newPage;\n      this.getItems();\n    }\n\n    onPageSizeChange() {\n      this.storeService._pageSizeSubject.next(this.storeService.pageSize);\n    }\n\n    openFilter() {\n      this.modalService.open(FilterComponent);\n    }\n\n  }\n\n  ItemsComponent.ɵfac = function ItemsComponent_Factory(t) {\n    return new (t || ItemsComponent)(i0.ɵɵdirectiveInject(i1.ItemsService), i0.ɵɵdirectiveInject(i2.StoreService), i0.ɵɵdirectiveInject(i3.NgbModal));\n  };\n\n  ItemsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemsComponent,\n    selectors: [[\"app-items\"]],\n    decls: 18,\n    vars: 5,\n    consts: [[\"id\", \"pageSize\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"3\"], [\"value\", \"5\"], [\"value\", \"10\"], [\"value\", \"50\"], [1, \"row\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [3, \"page\", \"pageSize\", \"collectionSize\", \"pageChange\"], [1, \"card\", 2, \"width\", \"15rem\"], [1, \"card-body\"], [1, \"card-title\"], [3, \"routerLink\"], [1, \"card-subtitle\", \"mb-2\", \"text-muted\"]],\n    template: function ItemsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"Products\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(2, \" Page size:\\n\");\n        i0.ɵɵelementStart(3, \"select\", 0);\n        i0.ɵɵlistener(\"ngModelChange\", function ItemsComponent_Template_select_ngModelChange_3_listener($event) {\n          return ctx.storeService.pageSize = $event;\n        })(\"change\", function ItemsComponent_Template_select_change_3_listener() {\n          return ctx.onPageSizeChange();\n        });\n        i0.ɵɵelementStart(4, \"option\", 1);\n        i0.ɵɵtext(5, \"3\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"option\", 2);\n        i0.ɵɵtext(7, \"5\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"option\", 3);\n        i0.ɵɵtext(9, \"10\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"option\", 4);\n        i0.ɵɵtext(11, \"50\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(12, \"br\");\n        i0.ɵɵelementStart(13, \"div\", 5);\n        i0.ɵɵtemplate(14, ItemsComponent_div_14_Template, 8, 3, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_15_listener() {\n          return ctx.openFilter();\n        });\n        i0.ɵɵtext(16, \"Filters\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"ngb-pagination\", 8);\n        i0.ɵɵlistener(\"pageChange\", function ItemsComponent_Template_ngb_pagination_pageChange_17_listener($event) {\n          return ctx.storeService.page = $event;\n        })(\"pageChange\", function ItemsComponent_Template_ngb_pagination_pageChange_17_listener($event) {\n          return ctx.onPageChange($event);\n        });\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.storeService.pageSize);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.storeService.items);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"page\", ctx.storeService.page)(\"pageSize\", ctx.storeService.pageSize)(\"collectionSize\", ctx.storeService.count);\n      }\n    },\n    directives: [i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i5.NgForOf, i6.RouterLinkWithHref, i3.NgbPagination],\n    styles: [\"\"]\n  });\n  return ItemsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}